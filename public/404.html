<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>404 ‚Äî AlgoLens</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="color-scheme" content="light dark" />
    <meta name="robots" content="noindex" />
    <style>
      /* Light is the default; dark overrides live below */
      :root {
        --bg: #ffffff;
        --fg: #0b1020;
        --muted: #4b5563;
        --card: #f8fafc;
        --accent: #2b72e6;
        --border: #e5e7eb;
        --shadow: 0 10px 30px rgba(2, 6, 23, 0.07);
        --ring: 0 0 0 3px rgba(43, 114, 230, 0.25);
        --btn-bg: rgba(255, 255, 255, 0.8);
        --btn-bg-hover: #ffffff;
        --btn-border: #e5e7eb;
      }
      /* Dark theme (applies if html has data-theme="dark" or class="dark") */
      [data-theme="dark"],
      html.dark {
        --bg: #0b1020;
        --fg: #eaf0ff;
        --muted: #9aa5c2;
        --card: #0f1733;
        --accent: #2b72e6;
        --border: #253059;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
        --ring: 0 0 0 3px rgba(43, 114, 230, 0.35);
        --btn-bg: rgba(30, 41, 59, 0.8);
        --btn-bg-hover: rgba(30, 41, 59, 1);
        --btn-border: #334155;
      }

      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        background:
          radial-gradient(
            1200px 800px at 80% -20%,
            rgba(108, 140, 255, 0.08),
            transparent 60%
          ),
          radial-gradient(
            1200px 800px at 0% 100%,
            rgba(34, 211, 238, 0.06),
            transparent 55%
          ),
          var(--bg);
        color: var(--fg);
        font:
          16px/1.45 system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Inter,
          Arial,
          sans-serif;
        display: grid;
        place-items: center;
        padding: 24px;
      }

      /* top-right theme toggle */
      .topbar {
        position: fixed;
        inset: 16px 16px auto auto;
        z-index: 10;
      }
      .theme-toggle {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 10px;
        border: 1px solid var(--btn-border);
        background: var(--btn-bg);
        color: var(--fg);
        cursor: pointer;
        user-select: none;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.06);
        transition:
          background 0.15s ease,
          border-color 0.15s ease,
          transform 0.06s ease;
      }
      .theme-toggle:hover {
        background: var(--btn-bg-hover);
      }
      .theme-toggle:active {
        transform: translateY(1px);
      }
      .theme-toggle:focus-visible {
        outline: none;
        box-shadow: var(--ring);
      }
      .theme-toggle .txt {
        font-size: 14px;
        font-weight: 600;
      }
      .theme-toggle .emo {
        font-size: 18px;
        line-height: 1;
      }

      .card {
        width: min(860px, 100%);
        padding: 28px;
        border: 1px solid var(--border);
        background: var(--card);
        border-radius: 18px;
        box-shadow: var(--shadow);
      }
      .row {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
      }
      h1 {
        margin: 0 0 6px;
        font-size: 28px;
        letter-spacing: 0.2px;
      }
      p {
        margin: 0 0 14px;
        color: var(--muted);
      }
      .lead {
        font-size: 15px;
      }

      .hero {
        display: grid;
        grid-template-columns: 100px 1fr;
        gap: 18px;
        align-items: center;
      }
      @media (max-width: 560px) {
        .hero {
          grid-template-columns: 1fr;
        }
      }
      .big404 {
        width: 100px;
        height: 100px;
        border-radius: 20px;
        background:
          conic-gradient(from 210deg at 70% 30%, var(--accent), #22d3ee),
          linear-gradient(180deg, rgba(255, 255, 255, 0.05), transparent);
        display: grid;
        place-items: center;
        color: #fff;
        font:
          800 28px/1 ui-monospace,
          SFMono-Regular,
          Menlo,
          Consolas,
          monospace;
        box-shadow: inset 0 0 24px rgba(255, 255, 255, 0.08);
        position: relative;
        overflow: hidden;
      }
      .big404::after {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(
          180px 100px at -10% 120%,
          rgba(255, 255, 255, 0.18),
          transparent 50%
        );
        mix-blend-mode: screen;
      }

      .actions {
        margin-top: 14px;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: transparent;
        color: var(--fg);
        text-decoration: none;
        cursor: pointer;
        user-select: none;
        transition:
          transform 0.06s ease,
          background 0.2s ease,
          border-color 0.2s ease;
      }
      .btn:active {
        transform: translateY(1px);
      }
      .btn:focus-visible {
        outline: none;
        box-shadow: var(--ring);
      }
      .btn.primary {
        background: var(--accent);
        color: #fff;
        border-color: transparent;
      }

      .divider {
        height: 1px;
        background: var(--border);
        margin: 16px 0;
        opacity: 0.6;
      }
      .hint {
        font-size: 13px;
        color: var(--muted);
        margin-top: 8px;
      }
    </style>
  </head>
  <body>
    <!-- top-right: theme toggle only -->
    <div class="topbar">
      <button
        id="toggleTheme"
        class="theme-toggle"
        type="button"
        aria-pressed="false"
        title="Switch theme"
      >
        <span id="themeText" class="txt">Light</span>
        <span id="themeEmoji" class="emo">üå§Ô∏è</span>
      </button>
    </div>

    <main class="card" role="main" aria-labelledby="t">
      <div class="hero">
        <div class="big404" aria-hidden="true">404</div>
        <header>
          <h1 id="t">Page not found</h1>
          <p class="lead">
            The page you‚Äôre looking for isn‚Äôt here. You can return to AlgoLens
            or resume where you left off.
          </p>
          <div class="actions row">
            <a id="home" class="btn primary" href="/">Go to Home</a>
            <button id="resume" class="btn" type="button" style="display: none">
              Resume where I was
            </button>
          </div>
          <p class="hint">
            Shortcuts: <kbd class="kbd">H</kbd> Home ‚Ä¢
            <kbd class="kbd">R</kbd> Reload
          </p>
        </header>
      </div>

      <div class="divider" role="separator" aria-hidden="true"></div>

      <p id="auto" class="hint">Redirecting you back to the app shortly‚Ä¶</p>
    </main>

    <script>
      (function () {
        // Base handling so 404 works under / or /AlgoLens/
        var path = location.pathname;
        var base = path.endsWith("/404.html")
          ? path.slice(0, -"/404.html".length) || "/"
          : "/";
        function joinBase(p) {
          if (base === "/") return p;
          return (base.endsWith("/") ? base.slice(0, -1) : base) + p;
        }
        var $home = document.getElementById("home");
        if ($home) $home.setAttribute("href", joinBase("/"));

        // THEME: store + apply, independent of OS preference
        var STORAGE_KEYS = ["ALGO_THEME", "theme"]; // be compatible with your app
        var $toggle = document.getElementById("toggleTheme");
        var $txt = document.getElementById("themeText");
        var $emo = document.getElementById("themeEmoji");

        function saveTheme(theme) {
          try {
            STORAGE_KEYS.forEach(function (k) {
              localStorage.setItem(k, theme);
            });
          } catch (e) {}
        }
        function readTheme() {
          try {
            for (var i = 0; i < STORAGE_KEYS.length; i++) {
              var v = localStorage.getItem(STORAGE_KEYS[i]);
              if (v === "light" || v === "dark") return v;
            }
          } catch (e) {}
          // If nothing saved, infer from current DOM (in case app set it before)
          if (document.documentElement.getAttribute("data-theme")) {
            return document.documentElement.getAttribute("data-theme");
          }
          return "light"; // default
        }
        function applyTheme(theme) {
          var dark = theme === "dark";
          document.documentElement.setAttribute("data-theme", theme);
          document.documentElement.classList.toggle("dark", dark); // mirror app behavior
          if ($toggle)
            $toggle.setAttribute("aria-pressed", dark ? "true" : "false");
          if ($txt) $txt.textContent = dark ? "Dark" : "Light";
          if ($emo) $emo.textContent = dark ? "üåô" : "üå§Ô∏è";
          saveTheme(theme);
        }
        applyTheme(readTheme());
        if ($toggle) {
          $toggle.addEventListener("click", function () {
            var next = document.documentElement.classList.contains("dark")
              ? "light"
              : "dark";
            applyTheme(next);
          });
        }

        // Resume last deep-link if we have it
        var $resume = document.getElementById("resume");
        var last = null;
        try {
          last = sessionStorage.getItem("ALGO_REDIRECT_PATH");
        } catch (e) {}
        if (last && $resume) {
          $resume.style.display = "inline-flex";
          $resume.addEventListener("click", function () {
            location.href = joinBase("/") + last.replace(/^\//, "");
          });
        }

        // Gentle SPA auto-redirect back to "/"
        var looksLikeAsset = /\.[a-z0-9]{2,6}$/i.test(location.pathname);
        var skip = new URLSearchParams(location.search).has("no-redirect");
        var isRoot = path === base || path === base.replace(/\/$/, "");
        var auto = document.getElementById("auto");

        if (!looksLikeAsset && !skip && !isRoot) {
          try {
            sessionStorage.setItem(
              "ALGO_REDIRECT_PATH",
              location.pathname + location.search + location.hash
            );
          } catch (e) {}
          setTimeout(function () {
            location.replace(joinBase("/"));
          }, 1300);
        } else if (auto) {
          auto.textContent = "Use the actions above to navigate.";
        }

        // Shortcuts
        addEventListener("keydown", function (e) {
          if (e.altKey || e.metaKey || e.ctrlKey) return;
          if (e.key === "h" || e.key === "H") location.href = joinBase("/");
          if (e.key === "r" || e.key === "R") location.reload();
        });
      })();
    </script>
  </body>
</html>
